name: lab1

mgmt:
  network: lab1_mgmt
  ipv4-subnet: 172.31.0.0/24
  external-access: false

topology:
  kinds:
    xrd:
      kind: cisco_xrd
      image: ${XRD_IMAGE:=ios-xr/xrd-control-plane}:${XRD_VERSION:=25.1.1}

  nodes:
    IPS1-R1:
      kind: xrd
      mgmt-ipv4: 172.31.0.101
      startup-config: configs/isp1-r1.txt
    ISP1-R2:
      kind: xrd
      mgmt-ipv4: 172.31.0.102
      startup-config: configs/isp1-r2.txt
    IPS1-R3:
      kind: xrd
      mgmt-ipv4: 172.31.0.103
      startup-config: configs/isp1-r3.txt
    IPS1-R4:
      kind: xrd
      mgmt-ipv4: 172.31.0.104
      startup-config: configs/isp1-r4.txt
    IPS1-RR:
      kind: xrd
      mgmt-ipv4: 172.31.0.105
      startup-config: configs/isp1-rr.txt
    R7-Ironman:
      kind: xrd
      mgmt-ipv4: 172.31.0.106
      startup-config: configs/r7-ironman.txt
    R1-Hawkeye:
      kind: xrd
      mgmt-ipv4: 172.31.0.107
      startup-config: configs/r1-hawkeye.txt
    R9-Hulk:
      kind: xrd
      mgmt-ipv4: 172.31.0.108
      startup-config: configs/r9-hulk.txt
    R11-Hulk:
      kind: xrd
      mgmt-ipv4: 172.31.0.109
      startup-config: configs/r11-hulk.txt
    ISP3:
      kind: xrd
      mgmt-ipv4: 172.31.0.110
      startup-config: configs/isp3.txt
    R4-Ironman:
      kind: xrd
      mgmt-ipv4: 172.31.0.111
      startup-config: configs/r4-ironman.txt


  links:
    - endpoints: [isp1-r1:Gi0-0-0-5, isp1-r3:Gi0-0-0-5]
    - endpoints: [isp1-r1:Gi0-0-0-6, isp1-rr:Gi0-0-0-6]
    - endpoints: [isp1-r1:Gi0-0-0-7, isp1-r2:Gi0-0-0-7]
    - endpoints: [isp1-r1:Gi0-0-0-0, r7-ironman:Gi0-0-0-0]

    - endpoints: [isp1-r2:Gi0-0-0-5, isp1-rr:Gi0-0-0-5]
    - endpoints: [isp1-r2:Gi0-0-0-6, isp1-r4:Gi0-0-0-6]
    - endpoints: [isp1-r2:Gi0-0-0-1, r7-hawkeye:Gi0-0-0-1]
    - endpoints: [isp1-r2:Gi0-0-0-2, r11-hulk:Gi0-0-0-2]
    - endpoints: [isp1-r2:Gi0-0-0-3, r9-hulk:Gi0-0-0-3]

    - endpoints: [isp1-r3:Gi0-0-0-3, isp1-r4:Gi0-0-0-3]
    - endpoints: [isp1-r3:Gi0-0-0-4, isp1-rr:Gi0-0-0-4]

    - endpoints: [isp1-r4:Gi0-0-0-7, isp1-rr:Gi0-0-0-7]
    - endpoints: [isp1-r4:Gi0-0-0-4, isp3:Gi0-0-0-4]
    
    - endpoints: [isp3:Gi0-0-0-0, r4-ironman:Gi0-0-0-0]
    
    - endpoints: [isp1-r3:Gi0-0-0-7, macvlan:ens3]
    - endpoints: [r4-ironman:Gi0-0-0-2, macvlan:ens4]